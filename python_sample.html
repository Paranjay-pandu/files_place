<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run Python Code</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
    <div class="flex flex-col gap-4">
        <textarea id="pythonCode" class="w-full h-48 p-2 border border-gray-300 rounded resize-y bg-white text-gray-800" placeholder="Write your Python code here..."></textarea>
        <button id="runButton" class="bg-blue-500 text-white py-2 px-4 rounded">Run</button>
        <div id="output" class="border border-gray-300 rounded p-2 bg-gray-50 text-gray-800 min-h-[50px]"></div>
    </div>
    
    <script>
        const runButton = document.getElementById('runButton');
        const outputDiv = document.getElementById('output');

        runButton.addEventListener('click', async () => {
            const code = document.getElementById('pythonCode').value;
            
            // Disable button and show loading state
            runButton.disabled = true;
            runButton.innerText = 'Running...';
            outputDiv.innerText = 'Executing code...';

            try {
                const response = await fetch('/run-python', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ code }),
                });
    
                if (response.ok) {
                    const result = await response.json();
                    outputDiv.innerText = result.output;
                } else {
                    const error = await response.text();
                    outputDiv.innerText = `Error running the code: ${error}`;
                }
            } catch (error) {
                outputDiv.innerText = `Network error: ${error.message}`;
            } finally {
                // Re-enable button and reset text
                runButton.disabled = false;
                runButton.innerText = 'Run';
            }
        });
    </script>
</body>
</html>